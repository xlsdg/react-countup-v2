{"version":3,"file":"ReactCountUp.min.js","sources":["../src/index.jsx"],"sourcesContent":["import React from 'react';\n// import PropTypes from 'prop-types';\n// import _ from 'lodash-es';\nimport _isFunction from 'lodash-es/_isFunction';\nimport CountUp from 'countup.js';\n\nexport default class ReactCountUp extends React.Component {\n  // static propTypes = {\n  //   className: PropTypes.string,\n  //   endVal: PropTypes.number,\n  //   delay: PropTypes.number,\n  //   options: PropTypes.object,\n  //   onReady: PropTypes.func,\n  //   onComplete: PropTypes.func,\n  //   onUpdate: PropTypes.func,\n  //   onError: PropTypes.func,\n  // };\n\n  static defaultProps = {\n    className: null,\n    endVal: 100,\n    delay: 0,\n    options: {\n      startVal: 0,\n      decimalPlaces: 0,\n      duration: 2,\n      useEasing: true,\n      useGrouping: true,\n      smartEasingThreshold: 999,\n      smartEasingAmount: 333,\n      separator: ',',\n      decimal: '.',\n      easingFn: null,\n      formattingFn: null,\n      prefix: '',\n      suffix: '',\n      numerals: [],\n    },\n    onReady: () => {},\n    onComplete: () => {},\n    onUpdate: () => {},\n    onError: () => {},\n  };\n\n  // static getDerivedStateFromProps(nextProps, prevState) {\n  //   return null;\n  // }\n\n  constructor(props) {\n    super(props);\n\n    this.dom = null;\n    this.state = {\n      instance: null,\n    };\n  }\n\n  componentDidMount() {\n    const that = this;\n    that.init();\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    const that = this;\n    // console.log('shouldComponentUpdate', that.props, nextProps, that.state, nextState);\n    const { className, endVal, options } = that.props;\n\n    const isUpdate =\n      className !== nextProps.className ||\n      endVal !== nextProps.endVal ||\n      options !== nextProps.options;\n\n    return isUpdate;\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    const that = this;\n    that.update(prevProps, prevState);\n  }\n\n  componentWillUnmount() {\n    const that = this;\n    that.unInit();\n  }\n\n  init = (forceUpdate = false) => {\n    const that = this;\n    const { delay, endVal, options, onReady, onError } = that.props;\n\n    if (!that.dom) {\n      return;\n    }\n\n    const instance = new CountUp(that.dom, endVal, options);\n\n    if (instance.error && _isFunction(onError)) {\n      return onError(instance.error);\n    }\n\n    that.setState({\n      instance,\n    });\n\n    if (!forceUpdate && _isFunction(onReady)) {\n      onReady(instance, CountUp);\n    }\n\n    setTimeout(() => instance.start(), delay);\n  };\n\n  update = (prevProps, prevState) => {\n    const that = this;\n    const { instance } = that.state;\n    const { endVal, options, onUpdate } = that.props;\n\n    const isUpdate = options !== prevProps.options;\n\n    if (isUpdate) {\n      that.init(true);\n    } else if (endVal !== prevProps.endVal) {\n      that.reset();\n      that.updateValue(endVal);\n    }\n\n    if (_isFunction(onUpdate)) {\n      onUpdate(instance, CountUp);\n    }\n  };\n\n  unInit = () => {\n    const that = this;\n\n    that.setState({\n      instance: null,\n    });\n  };\n\n  printValue = value => {\n    const that = this;\n    const { instance } = that.state;\n\n    if (!instance) {\n      return;\n    }\n\n    return instance.printValue(value);\n  };\n\n  start = callback => {\n    const that = this;\n    const { onComplete } = that.props;\n    const { instance } = that.state;\n\n    if (!instance) {\n      return;\n    }\n\n    return instance.start(() => {\n      if (_isFunction(callback)) {\n        callback(instance, CountUp);\n      }\n\n      if (_isFunction(onComplete)) {\n        onComplete(instance, CountUp);\n      }\n    });\n  };\n\n  pauseResume = () => {\n    const that = this;\n    const { instance } = that.state;\n\n    if (!instance) {\n      return;\n    }\n\n    return instance.pauseResume();\n  };\n\n  reset = () => {\n    const that = this;\n    const { instance } = that.state;\n\n    if (!instance) {\n      return;\n    }\n\n    return instance.reset();\n  };\n\n  updateValue = newEndVal => {\n    const that = this;\n    const { instance } = that.state;\n\n    if (!instance) {\n      return;\n    }\n\n    return instance.update(newEndVal);\n  };\n\n  render() {\n    const that = this;\n    const { className } = that.props;\n\n    return (\n      <span\n        className={className}\n        ref={e => {\n          that.dom = e;\n        }}\n      />\n    );\n  }\n}\n"],"names":["ReactCountUp","props","forceUpdate","that","delay","endVal","options","onReady","onError","dom","instance","CountUp","error","_isFunction","setState","setTimeout","start","prevProps","prevState","state","onUpdate","init","reset","updateValue","value","printValue","callback","onComplete","pauseResume","newEndVal","update","React","Component","this","nextProps","nextState","className","snapshot","unInit","ref","e","startVal","decimalPlaces","duration","useEasing","useGrouping","smartEasingThreshold","smartEasingAmount","separator","decimal","easingFn","formattingFn","prefix","suffix","numerals"],"mappings":"mlCAMqBA,yBA0CPC,iJACJA,uEAoCD,eAACC,0DACAC,SAC+CA,EAAKF,MAAlDG,IAAAA,MAAOC,IAAAA,OAAQC,IAAAA,QAASC,IAAAA,QAASC,IAAAA,WAEpCL,EAAKM,SAIJC,EAAW,IAAIC,EAAQR,EAAKM,IAAKJ,EAAQC,MAE3CI,EAASE,OAASC,EAAYL,UACzBA,EAAQE,EAASE,OAG1BT,EAAKW,SAAS,CACZJ,SAAAA,KAGGR,GAAeW,EAAYN,IAC9BA,EAAQG,EAAUC,GAGpBI,WAAW,kBAAML,EAASM,SAASZ,sBAG5B,SAACa,EAAWC,OACbf,OACEO,EAAaP,EAAKgB,MAAlBT,WAC8BP,EAAKF,MAAnCI,IAAAA,OAAQC,IAAAA,QAASc,IAAAA,SAERd,IAAYW,EAAUX,QAGrCH,EAAKkB,MAAK,GACDhB,IAAWY,EAAUZ,SAC9BF,EAAKmB,QACLnB,EAAKoB,YAAYlB,IAGfQ,EAAYO,IACdA,EAASV,EAAUC,qBAId,gBAGFG,SAAS,CACZJ,SAAU,6BAID,SAAAc,OAEHd,OAAkBS,MAAlBT,YAEHA,SAIEA,EAASe,WAAWD,oBAGrB,SAAAE,OACAvB,OACEwB,EAAexB,EAAKF,MAApB0B,WACAjB,EAAaP,EAAKgB,MAAlBT,YAEHA,SAIEA,EAASM,MAAM,WAChBH,EAAYa,IACdA,EAAShB,EAAUC,GAGjBE,EAAYc,IACdA,EAAWjB,EAAUC,4BAKb,eAEJD,OAAkBS,MAAlBT,YAEHA,SAIEA,EAASkB,+BAGV,eAEElB,OAAkBS,MAAlBT,YAEHA,SAIEA,EAASY,+BAGJ,SAAAO,OAEJnB,OAAkBS,MAAlBT,YAEHA,SAIEA,EAASoB,OAAOD,OAnJlBpB,IAAM,OACNU,MAAQ,CACXT,SAAU,8PA/C0BqB,EAAMC,6DAoD/BC,KACRZ,qDAGea,EAAWC,SAClBF,KAE+BhC,MAApCmC,IAAAA,UAAW/B,IAAAA,OAAQC,IAAAA,eAGzB8B,IAAcF,EAAUE,WACxB/B,IAAW6B,EAAU7B,QACrBC,IAAY4B,EAAU5B,mDAKPW,EAAWC,EAAWmB,GAC1BJ,KACRH,OAAOb,EAAWC,kDAIVe,KACRK,8CAwHCnC,EAAO8B,KACLG,EAAcjC,EAAKF,MAAnBmC,iBAGNL,wBACEK,UAAWA,EACXG,IAAK,SAAAC,GACHrC,EAAKM,IAAM+B,mDA3MAxC,iBAYG,CACpBoC,UAAW,KACX/B,OAAQ,IACRD,MAAO,EACPE,QAAS,CACPmC,SAAU,EACVC,cAAe,EACfC,SAAU,EACVC,WAAW,EACXC,aAAa,EACbC,qBAAsB,IACtBC,kBAAmB,IACnBC,UAAW,IACXC,QAAS,IACTC,SAAU,KACVC,aAAc,KACdC,OAAQ,GACRC,OAAQ,GACRC,SAAU,IAEZ/C,QAAS,aACToB,WAAY,aACZP,SAAU,aACVZ,QAAS"}